{% extends '@BreadContent/Layer/base.html.twig' %}

{% block title %}Обратная связь{% endblock %}

{% block content %}
    <div ng-controller="FeedbackCtrl">

        <div class="layer-submitting" ng-show="layerSubmitting"></div>
        <div class="load" ng-show="layerSubmitting"></div>

        <form name="feedback" novalidate>
            <div class="form-group">
                <label for="feedback-name" class="required">ФИО</label>
                <input
                    id="feedback-name"
                    name="Name"
                    ng-model="userData.Name"
                    type="text"
                    class="field-text"
                    required
                    backend
                >
                <div class="input-error" ng-if="feedback.Name.$invalid && feedback.Name.$dirty" ng-messages="feedback.Name.$error">
                    <p class="alert-error" ng-message="required">Введите ФИО</p>
                    <p class="alert-error" ng-message="backend">[[ feedback.Name.errorMessages.backend ]]</p>
                </div>
            </div>
            <div class="form-group">
                <label for="feedback-phone" class="required">Телефон</label>
                <input
                    id="feedback-phone"
                    name="Phone"
                    ng-model="userData.Phone"
                    type="text"
                    class="field-text"
                    required
                    backend
                    ui-mask="+7 999 999 99 99"
                >
                <div class="input-error" ng-if="feedback.Phone.$invalid && feedback.Phone.$dirty" ng-messages="feedback.Phone.$error">
                    <p class="alert-error" ng-message="required">Введите Телефон</p>
                    <p class="alert-error" ng-message="backend">[[ feedback.Phone.errorMessages.backend ]]</p>
                </div>
            </div>
            <div class="form-group">
                <label for="feedback-email" class="required">E-mail</label>
                <input
                        id="feedback-email"
                        name="Email"
                        ng-model="userData.Email"
                        type="email"
                        class="field-text"
                        required
                        backend
                >
                <div class="input-error" ng-if="feedback.Email.$invalid && feedback.Email.$dirty" ng-messages="feedback.Email.$error">
                    <p class="alert-error" ng-message="required">Введите E-mail</p>
                    <p class="alert-error" ng-message="email">E-mail введен неверно</p>
                    <p class="alert-error" ng-message="backend">[[ feedback.Phone.errorMessages.backend ]]</p>
                </div>
            </div>
            <div class="form-group form-group_no-margin">
                <label for="feedback-comment">Комментарий</label>
                <textarea
                    id="feedback-comment"
                    name="Comment"
                    ng-model="userData.Data.Comment"
                    class="field-text-area field-bottom-10"
                ></textarea>
            </div>
            <div class="form-group">
                <div class="agree-checkbox">
                    <input
                        id="layer-agree"
                        name="Agree"
                        ng-model="userData.Agree"
                        type="checkbox"
                        checkbox-label-class="agree-checkbox"
                        label-wrap-class="agree-checkbox-label"
                        label-wrap-element="span"
                        title="Даю согласие на обработку персональных данных"
                        required
                        checkbox
                        backend
                    >
                </div>
                <div ng-if="feedback.Agree.$invalid && feedback.Agree.$dirty" ng-messages="feedback.Agree.$error">
                    <p class="alert-error" ng-message="required">Необходимо согласиться с условиями</p>
                    <p class="alert-error" ng-message="backend">[[ feedback.Agree.errorMessages.backend ]]</p>
                </div>
            </div>
            <button
                type="submit"
                class="button"
                ng-click="submitFeedback($event, feedback)"
            >Отправить</button>
        </form>
    </div>
{% endblock %}