{% extends '@BreadContent/layout.html.twig' %}

{% block title %}{{ page.title }}{% endblock %}

{% block content %}
    <section ng-controller="ProductCtrl" ng-cloak>
        <div class="load" ng-show="load || technicalLoad"></div>
        <div class="load-space-block" ng-hide="!load"></div>
        <div class="container">
            <div class="col-md-12" ng-show="!load">
                <div class="row">
                    <h1>{{ page.title }}</h1>
                </div>
            </div>
            <div class="row">
                <div class="col-md-4">
                    <div class="select-block">
                        <i class="fa "></i>
                        <select class="select" name="" id="" ng-model="storage.filter.category">
                            <option class="select-option" ng-class="{'select-option_active': storage.filter.category == item.Id}" ng-repeat="item in storage.filterData.category" value="[[item.Id]]">[[item.Title]]</option>
                        </select>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="products-filter">
                        <select class="select" name="" id="" ng-model="storage.filter.unit">
                            <option class="select-option" ng-repeat="item in storage.filterData.unit" value="[[item.Id]]">[[item.Title]]</option>
                        </select>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="products-filter">
                        <select class="select" name="" id="" ng-model="storage.filter.flour">
                            <option class="select-option" ng-repeat="item in storage.filterData.flour" value="[[item.Id]]">[[item.Title]]</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6">
                    <rzslider
                            class="custom-slider"
                            rz-slider-model="storage.filter.minPrice"
                            rz-slider-high="storage.filter.maxPrice"
                            rz-slider-options="storage.priceSliderOptions"
                    ></rzslider>
                </div>
                <div class="col-md-4">
                    <input type="checkbox" ng-model="storage.sort.price" ng-true-value="'asc'" ng-false-value="'desc'">
                </div>
            </div>
            <div class="row" ng-show="storage.filteredData.length">
                <product ng-repeat="product in storage.filteredData" source="product"></product>
            </div>
            <div class="row" ng-if="!load && !storage.filteredData.length && !dataLoadError">
                <div class="col-md-12">
                    <p>Список продукции пуст</p>
                </div>
            </div>
            <div class="row" ng-if="dataLoadError">
                <div class="col-md-12">
                    <p class="load-error load-error_14px">Во время загрузки данных возникли ошибки</p>
                </div>
            </div>
        </div>
    </section>
{% endblock %}